apiVersion: apps/v1
kind: Deployment
metadata:
  name: simpl-fe-onboarding
  namespace: authority01
spec:
  template:
    spec:
      volumes:    
            # ===== HTML Volumes =====
        - name: onboarding-html
          configMap:
            name: authority-onboarding-html
        # ===== JS Override Volume =====
        - name: js-override
          emptyDir: {}
        # ===== CSS Volumes (todos los submódulos) =====

        - name: simpl-fe-css-onboarding
          configMap:
            name: simpl-fe-css-onboarding
        - name: simpl-fe-css-simpl-shell
          configMap:
            name: simpl-fe-css-simpl-shell
        - name: simpl-fe-css-sap
          configMap:
            name: simpl-fe-css-sap
        - name: simpl-fe-css-identity-provider
          configMap:
            name: simpl-fe-css-identity-provider
        - name: simpl-fe-css-usersandroles
          configMap:
            name: simpl-fe-css-usersandroles
        - name: simpl-fe-css-participant-utility
          configMap:
            name: simpl-fe-css-participant-utility
        # ===== JSON i18n Volumes =====
        - name: onboarding-i18n
          configMap:
            name: onboarding-i18n
        - name: onboarding-i18n-ecl
          configMap:
            name: onboarding-i18n-ecl
        - name: onboarding-i18n-eui
          configMap:
            name: onboarding-i18n-eui
        - name: simpl-shell-i18n
          configMap:
            name: simpl-shell-i18n
        - name: sap-i18n
          configMap:
            name: sap-i18n
        - name: sap-i18n-ecl
          configMap:
            name: sap-i18n-ecl
        - name: sap-i18n-eui
          configMap:
            name: sap-i18n-eui
        - name: identity-provider-i18n
          configMap:
            name: identity-provider-i18n
        - name: identity-provider-i18n-ecl
          configMap:
            name: identity-provider-i18n-ecl
        - name: identity-provider-i18n-eui
          configMap:
            name: identity-provider-i18n-eui
        - name: usersandroles-i18n
          configMap:
            name: usersandroles-i18n
        - name: usersandroles-i18n-ecl
          configMap:
            name: usersandroles-i18n-ecl
        - name: usersandroles-i18n-eui
          configMap:
            name: usersandroles-i18n-eui
        - name: participant-utility-i18n
          configMap:
            name: participant-utility-i18n
        - name: participant-utility-i18n-ecl
          configMap:
            name: participant-utility-i18n-ecl
        - name: participant-utility-i18n-eui
          configMap:
            name: participant-utility-i18n-eui
        # ===== Logo Volume =====
        - name: simpl-logo
          configMap:
            name: simpl-logo
      initContainers:
        - name: download-js-override
          image: curlimages/curl:latest
          command: ['sh', '-c']
          args:
            - |
              curl -fSL -o /target/566.ef436edf86258396.js \
                https://raw.githubusercontent.com/cpp-FUEIB/ESDATIB-interface/main/Patch_Interface/agents/authority/html-config/html/simpl-fe-onboarding/onboarding/566.ef436edf86258396.js
              echo "✅ JS file downloaded from GitHub"
              ls -lh /target/
          volumeMounts:
            - name: js-override
              mountPath: /target
      containers:
        - name: simpl-fe-onboarding
          # ===== JSON i18n Mounts =====
          volumeMounts:  
          # ===== HTML Mounts =====
            - name: onboarding-html
              mountPath: /usr/share/nginx/html/onboarding/index.html
              subPath: index.html
            # ===== JS Override Mount =====
            - name: js-override
              mountPath: /usr/share/nginx/html/onboarding/566.ef436edf86258396.js
              subPath: 566.ef436edf86258396.js
            # ===== CSS Mounts (todos los submódulos) =====

            - name: simpl-fe-css-onboarding
              mountPath: /usr/share/nginx/html/onboarding/styles.89583e0616aa3a16.css
              subPath: styles.css
            - name: simpl-fe-css-simpl-shell
              mountPath: /usr/share/nginx/html/simpl-shell/styles.7cfb3136cfd0d2d9.css
              subPath: styles.css
            - name: simpl-fe-css-sap
              mountPath: /usr/share/nginx/html/sap/styles.896d4367e1c5e040.css
              subPath: styles.css
            - name: simpl-fe-css-identity-provider
              mountPath: /usr/share/nginx/html/identity-provider/styles.896d4367e1c5e040.css
              subPath: styles.css
            - name: simpl-fe-css-usersandroles
              mountPath: /usr/share/nginx/html/usersandroles/styles.a198e9b8e4401c04.css
              subPath: styles.css
            - name: simpl-fe-css-participant-utility
              mountPath: /usr/share/nginx/html/participant-utility/styles.a198e9b8e4401c04.css
              subPath: styles.css
            # ===== JSON i18n Mounts =====
            - name: onboarding-i18n
              mountPath: /usr/share/nginx/html/onboarding/assets/i18n/en.json
              subPath: en.json
            - name: onboarding-i18n-ecl
              mountPath: /usr/share/nginx/html/onboarding/assets/i18n-ecl/en.json
              subPath: en.json
            - name: onboarding-i18n-eui
              mountPath: /usr/share/nginx/html/onboarding/assets/i18n-eui/en.json
              subPath: en.json
            - name: simpl-shell-i18n
              mountPath: /usr/share/nginx/html/simpl-shell/assets/i18n/en.json
              subPath: en.json
            - name: sap-i18n
              mountPath: /usr/share/nginx/html/sap/assets/i18n/en.json
              subPath: en.json
            - name: sap-i18n-ecl
              mountPath: /usr/share/nginx/html/sap/assets/i18n-ecl/en.json
              subPath: en.json
            - name: sap-i18n-eui
              mountPath: /usr/share/nginx/html/sap/assets/i18n-eui/en.json
              subPath: en.json
            - name: identity-provider-i18n
              mountPath: /usr/share/nginx/html/identity-provider/assets/i18n/en.json
              subPath: en.json
            - name: identity-provider-i18n-ecl
              mountPath: /usr/share/nginx/html/identity-provider/assets/i18n-ecl/en.json
              subPath: en.json
            - name: identity-provider-i18n-eui
              mountPath: /usr/share/nginx/html/identity-provider/assets/i18n-eui/en.json
              subPath: en.json
            - name: usersandroles-i18n
              mountPath: /usr/share/nginx/html/usersandroles/assets/i18n/en.json
              subPath: en.json
            - name: usersandroles-i18n-ecl
              mountPath: /usr/share/nginx/html/usersandroles/assets/i18n-ecl/en.json
              subPath: en.json
            - name: usersandroles-i18n-eui
              mountPath: /usr/share/nginx/html/usersandroles/assets/i18n-eui/en.json
              subPath: en.json
            - name: participant-utility-i18n
              mountPath: /usr/share/nginx/html/participant-utility/assets/i18n/en.json
              subPath: en.json
            - name: participant-utility-i18n-ecl
              mountPath: /usr/share/nginx/html/participant-utility/assets/i18n-ecl/en.json
              subPath: en.json
            - name: participant-utility-i18n-eui
              mountPath: /usr/share/nginx/html/participant-utility/assets/i18n-eui/en.json
              subPath: en.json
              # ===== Logo Mount =====
            - name: simpl-logo
              mountPath: /usr/share/nginx/html/onboarding/assets/images/logo/simpl-logo.svg
              subPath: simpl-logo.svg
            - name: simpl-logo
              mountPath: /usr/share/nginx/html/simpl-shell/assets/images/logo/simpl-logo.svg
              subPath: simpl-logo.svg
            - name: simpl-logo
              mountPath: /usr/share/nginx/html/sap/assets/images/logo/simpl-logo.svg
              subPath: simpl-logo.svg
            - name: simpl-logo
              mountPath: /usr/share/nginx/html/identity-provider/assets/images/logo/simpl-logo.svg
              subPath: simpl-logo.svg
            - name: simpl-logo
              mountPath: /usr/share/nginx/html/usersandroles/assets/images/logo/simpl-logo.svg
              subPath: simpl-logo.svg
            - name: simpl-logo
              mountPath: /usr/share/nginx/html/participant-utility/assets/images/logo/simpl-logo.svg
              subPath: simpl-logo.svg
